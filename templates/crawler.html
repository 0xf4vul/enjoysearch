<!DOCTYPE html>
<html>

<head>
  <title>Crawler a Web, Please!</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel=stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" />

  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I=" crossorigin="anonymous"></script>
</head>

<body>
  <script>
    // var socket = io.connect('http://' + document.domain + ':' + location.port + '/test');
    var socket = io.connect('http://' + 127.0.0.1 + ':' + 5000 + '/test');
    socket.on('my response', function(msg) {
      $('#log').append('<p>Received: ' + msg.data + '</p>');
    });
    $('form#emit').submit(function(event) {
      socket.emit('my event', {
        data: $('#emit_data').val()
      });
      return false;
    });
    $('form#broadcast').submit(function(event) {
      socket.emit('my broadcast event', {
        data: $('#broadcast_data').val()
      });
      return false;
    });
  </script>

  <div class="container">
    <h1>Crawler a Web, Please!</h1>
    <h6>A <a href='https://www.readmorejoy.com/'>Jiang Zhixiang</a> project. Here is our ReadMoreJoy <a href='/search'>Search Engine</a>.</h6>

    <p><strong>Crawler, Please!</strong> is a service that instantly crawler a websites.</p>
    <p>To get started: enter any URL, hit "Crawler, Please!", and you will be presented with all urls of the websites you provided.</p>

    <form action="/crawler" method="get">
      <strong>&nbsp;&nbsp;URL</strong>: <input type="text" name="url" size="80">
      <button type='submit'>Crawler, Please!</button>
      <button type='button'>Stop, Please!</button>
    </form>
    {% for post in content %}
    {{ post }} <br>
    {% endfor %}
    <hr />
    <div id="log"></div>
      <hr />
    <center>Powered by <a href='https://www.readmorejoy.com/'>ReadMoreJoy</a> and <a href='https://www.readmorejoy.com/2019/07/services/'>Services</a></center>
    <div style="display:none;"><img src="{{ url_for('static', filename='readmorejoy1.jpeg') }}" alt=""></div>

  </div>

</body>

</html>
